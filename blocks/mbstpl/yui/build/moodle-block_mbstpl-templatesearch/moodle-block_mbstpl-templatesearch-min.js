YUI.add("moodle-block_mbstpl-templatesearch",function(e,t){M.block_mbstpl=M.block_mbstpl||{},M.block_mbstpl.templatesearch={},M.block_mbstpl.templatesearch.init=function(t){function s(){var s={};s.action="loadmoreresults",s.limitfrom=n,s.limitnum=r;var u=M.util.add_spinner(e,i),a={id:"mbstpl-loadmore-form",useDisabled:!0};e.io(t.ajaxurl,{method:"POST",form:a,data:s,on:{start:function(){u.show()},success:function(t,n){var r;try{r=e.JSON.parse(n.responseText)}catch(i){return}u.hide(),r.error!==0?alert(r.error):o(r.results)},failure:function(){u.hide()}}})}function o(t){t.limitfrom+t.limitnum>=t.total&&i.hide(),e.one("#mbstpl-search-listing").append(t.html),n+=r}function u(){n=Number(t.limitfrom),r=Number(t.limitnum),i=e.one("#mbstpl-search-loadmoreresults"),i&&i.on("click",function(e){e.preventDefault(),s()})}var n,r,i;u()}},"@VERSION@",{requires:["base","node","io-form"]});
