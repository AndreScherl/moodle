YUI.add("moodle-block_mbsnews-editnewsform",function(e,t){M.block_mbsnews=M.block_mbsnews||{},M.block_mbsnews.editnewsform=function(t){function a(){var e=n.get("value");e==0||e==10?i.set("disabled","disabled"):i.removeAttribute("disabled")}function f(){s.set("value",""),r.set("innerHTML",""),i.set("value",""),o.set("value",0)}function l(){f(),h(),a()}function c(n,r){e.io(t.url,{data:n,on:{success:function(t,n){var i;try{i=e.JSON.parse(n.responseText)}catch(s){return}i.error!==0?alert(i.error):r(i.results)}}})}function h(){var e={};e.action="getroleoptions",e.contextlevel=n.get("value"),c(e,function(e){p(e)})}function p(t){o.set("innerHTML","");for(var n=0;n<t.length;n++){var r=t[n];o.append(e.Node.create('<option value="'+r.value+'">'+r.text+"</option>"))}}function d(){var t={};t.action="searchrecipients",t.contextlevel=n.get("value"),t.roleid=o.get("value");var r=new Array;e.all('input[name^="instanceidsselected"]').each(function(e,t){var n=e.get("name").split("[")[1];n=n.substr(0,n.length-1),r[t]=n}),t.instanceidsselected=r.join("_"),c(t,function(e){v(e)})}function v(e){u.set("innerHTML",e)}function m(){n=e.one("#id_contextlevel"),s=e.one("#id_instanceids"),r=e.one("#id_instanceids_list"),i=e.one("#id_instanceids_search"),o=e.one("#id_roleid"),u=e.one("#id_recipients"),n.on("change",function(e){l(),d()}),s.on("change",function(e){d()}),o.on("change",function(e){d()}),a(),d()}var n,r,i,s,o,u;m()}},"@VERSION@",{requires:["base","node","io-base"]});
