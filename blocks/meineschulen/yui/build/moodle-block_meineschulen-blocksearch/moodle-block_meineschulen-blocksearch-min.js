YUI.add("moodle-block_meineschulen-blocksearch",function(b,a){M.block_meineschulen=M.block_meineschulen||{};M.block_meineschulen.blocksearch={init:function(e){var c,d,g;g=b.one("#meineschulen_school_form #searchtype_course");c=b.one("#meineschulen_school_form #schoolname");c.plug(b.Plugin.AutoComplete,{resultFilters:null,resultHighligher:"phraseMatch",maxResults:11,source:function(h,j){var i;i="school";if(g.get("checked")){i="course"}b.io(e.url,{data:{action:"blockschoolsearch",search:h,searchtype:i},on:{success:function(n,m){var k;try{k=b.JSON.parse(m.responseText)}catch(l){return}if(k.error!==0){alert(k.error)}else{j(k.results)}}}})},resultFormatter:function(i,h){return b.Array.map(h,function(j){return j.raw})}});c.ac.on("select",function(i){var h;i.preventDefault();if(i.itemNode.get("tagname")==="a"){return}h=i.itemNode.one("a");window.location=h.get("href")});d=c.next(".yui3-aclist");d.appendTo("body");var f=b.one("#meineschulen_school_form input:checked").getAttribute("data-action");c.set("placeholder",f);b.all("#meineschulen_school_form .searchtype input").on("click",function(h){var j=h.currentTarget.get("value");M.util.set_user_preference("block_meineschulen_searchtype",j);var i=h.currentTarget.getAttribute("data-action");c.set("placeholder",i)})}}},"@VERSION@",{requires:["base","node","io-base","json","autocomplete","autocomplete-highlighters","autocomplete-filters"]});