YUI.add("moodle-block_meineschulen-blocksearch",function(b,a){M.block_meineschulen=M.block_meineschulen||{};M.block_meineschulen.blocksearch={init:function(e){var c,d,f;f=b.one("#meineschulen_school_form #searchtype_course");c=b.one("#meineschulen_school_form #schoolname");c.plug(b.Plugin.AutoComplete,{resultFilters:null,resultHighligher:"phraseMatch",maxResults:11,source:function(g,i){var h;h="school";if(f.get("checked")){h="course"}b.io(e.url,{data:{action:"blockschoolsearch",search:g,searchtype:h},on:{success:function(m,l){var j;try{j=b.JSON.parse(l.responseText)}catch(k){return}if(j.error!==0){alert(j.error)}else{i(j.results)}}}})},resultFormatter:function(h,g){return b.Array.map(g,function(i){return i.raw})}});c.ac.on("select",function(h){var g;h.preventDefault();if(h.itemNode.get("tagname")==="a"){return}g=h.itemNode.one("a");window.location=g.get("href")});d=c.next(".yui3-aclist");d.appendTo("body");b.all("#meineschulen_school_form .searchtype input").on("click",function(g){var i=g.currentTarget.get("value");M.util.set_user_preference("block_meineschulen_searchtype",i);var h=g.currentTarget.getAttribute("data-action");c.set("placeholder",h)})}}},"@VERSION@",{requires:["base","node","io-base","json","autocomplete","autocomplete-highlighters","autocomplete-filters"]});
