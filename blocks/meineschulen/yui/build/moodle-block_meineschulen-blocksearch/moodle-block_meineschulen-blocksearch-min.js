YUI.add("moodle-block_meineschulen-blocksearch",function(e,t){M.block_meineschulen=M.block_meineschulen||{},M.block_meineschulen.blocksearch={init:function(t){var n,r,i;i=e.one("#meineschulen_school_form #searchtype_course"),n=e.one("#meineschulen_school_form #schoolname"),n.plug(e.Plugin.AutoComplete,{resultFilters:null,resultHighligher:"phraseMatch",maxResults:11,source:function(n,r){if(n.length<3)return;var s;s="school",i.get("checked")&&(s="course"),e.io(t.url,{data:{action:"blockschoolsearch",search:n,searchtype:s},on:{success:function(t,n){var i;try{i=e.JSON.parse(n.responseText)}catch(s){return}i.error!==0?alert(i.error):r(i.results)}}})},resultFormatter:function(t,n){return e.Array.map(n,function(e){return e.raw})}}),n.ac.on("select",function(e){var t;e.preventDefault();if(e.itemNode.get("tagname")==="a")return;t=e.itemNode.one("a"),window.location=t.get("href")}),r=n.next(".yui3-aclist"),r.appendTo("body"),e.all("#meineschulen_school_form .searchtype input").on("click",function(e){var t=e.currentTarget.get("value");M.util.set_user_preference("block_meineschulen_searchtype",t);var r=e.currentTarget.getAttribute("data-action");n.set("placeholder",r)})}}},"@VERSION@",{requires:["base","node","io-base","json","autocomplete","autocomplete-highlighters","autocomplete-filters"]});
